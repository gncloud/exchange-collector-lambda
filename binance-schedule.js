var AWS = require('aws-sdk');
//binance

let baseList =["BTC"   ,"BTC"   ,"BTC"   ,"BTC"   ,"ETH"    ,"ETH"   ,"ETH"   ,"ETH"   ,"BTC"   ,"BTC"   ,"ETH"   ,"USDT"   ,"USDT"   ,"BTC"   ,"ETH"   ,"ETH"   ,"ETH"   ,"ETH"   ,"BTC"   ,"BTC"   ,"ETH","BTC","ETH","BTC","BTC","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","BTC","ETH","BTC","BTC","ETH","BTC","ETH","BTC","BTC","ETH","BTC","BTC","ETH","BTC","ETH","BTC","BTC","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","ETH","BTC","ETH","BTC","ETH","BTC","ETH","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","USDT","BNB","BNB","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BNB","BTC","ETH","BTC","ETH","BNB","ETH","USDT","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","USDT","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BNB","ETH","USDT","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BNB","BTC","ETH","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BTC","ETH","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB","BTC","ETH","BNB"];
let coins =   ["ETH"   ,"LTC"   ,"BNB"   ,"NEO"   ,"QTUM"   ,"EOS"   ,"SNT"   ,"BNT"   ,"BCC"   ,"GAS"   ,"BNB"   ,"BTC"    ,"ETH"    ,"HSR"   ,"OAX"   ,"DNT"   ,"MCO"   ,"ICN"   ,"MCO"   ,"WTC"   ,"WTC","LRC","LRC","QTUM","YOYO","OMG","OMG","ZRX","ZRX","STRAT","STRAT","SNGLS","SNGLS","BQX","BQX","KNC","KNC","FUN","FUN","SNM","SNM","NEO","IOTA","IOTA","LINK","LINK","XVG","XVG","CTR","CTR","SALT","SALT","MDA","MDA","MTL","MTL","SUB","SUB","EOS","SNT","ETC","ETC","MTH","MTH","ENG","ENG","DNT","ZEC","ZEC","BNT","AST","AST","DASH","DASH","OAX","ICN","BTG","BTG","EVX","EVX","REQ","REQ","VIB","VIB","HSR","TRX","TRX","POWR","POWR","ARK","ARK","YOYO","XRP","XRP","MOD","MOD","ENJ","ENJ","STORJ","STORJ","BNB","VEN","YOYO","POWR","VEN","VEN","KMD","KMD","NULS","RCN","RCN","RCN","NULS","NULS","RDN","RDN","RDN","XMR","XMR","DLT","WTC","DLT","DLT","AMB","AMB","AMB","BCC","BCC","BCC","BAT","BAT","BAT","BCPT","BCPT","BCPT","ARN","ARN","GVT","GVT","CDT","CDT","GXS","GXS","NEO","NEO","POE","POE","QSP","QSP","QSP","BTS","BTS","BTS","XZC","XZC","XZC","LSK","LSK","LSK","TNT","TNT","FUEL","FUEL","MANA","MANA","BCD","BCD","DGD","DGD","IOTA","ADX","ADX","ADX","ADA","ADA","PPT","PPT","CMT","CMT","CMT","XLM","XLM","XLM","CND","CND","CND","LEND","LEND","WABI","WABI","WABI","LTC","LTC","LTC","TNB","TNB","WAVES","WAVES","WAVES","GTO","GTO","GTO","ICX","ICX","ICX","OST","OST","OST","ELF","ELF","AION","AION","AION","NEBL","NEBL","NEBL","BRD","BRD","BRD","MCO","EDO","EDO","WINGS","WINGS","NAV","NAV","NAV","LUN","LUN","TRIG","TRIG","TRIG","APPC","APPC","APPC","VIBE","VIBE","RLC","RLC","RLC","INS","INS","PIVX","PIVX","PIVX","IOST","IOST","CHAT","CHAT","STEEM","STEEM","STEEM","NANO","NANO","NANO","VIA","VIA","VIA","BLZ","BLZ","BLZ","AE","AE","AE","RPX","RPX","RPX","NCASH","NCASH","NCASH","POA","POA","POA"];
let symbols = ["ETHBTC","LTCBTC","BNBBTC","NEOBTC","QTUMETH","EOSETH","SNTETH","BNTETH","BCCBTC","GASBTC","BNBETH","BTCUSDT","ETHUSDT","HSRBTC","OAXETH","DNTETH","MCOETH","ICNETH","MCOBTC","WTCBTC","WTCETH","LRCBTC","LRCETH","QTUMBTC","YOYOBTC","OMGBTC","OMGETH","ZRXBTC","ZRXETH","STRATBTC","STRATETH","SNGLSBTC","SNGLSETH","BQXBTC","BQXETH","KNCBTC","KNCETH","FUNBTC","FUNETH","SNMBTC","SNMETH","NEOETH","IOTABTC","IOTAETH","LINKBTC","LINKETH","XVGBTC","XVGETH","CTRBTC","CTRETH","SALTBTC","SALTETH","MDABTC","MDAETH","MTLBTC","MTLETH","SUBBTC","SUBETH","EOSBTC","SNTBTC","ETCETH","ETCBTC","MTHBTC","MTHETH","ENGBTC","ENGETH","DNTBTC","ZECBTC","ZECETH","BNTBTC","ASTBTC","ASTETH","DASHBTC","DASHETH","OAXBTC","ICNBTC","BTGBTC","BTGETH","EVXBTC","EVXETH","REQBTC","REQETH","VIBBTC","VIBETH","HSRETH","TRXBTC","TRXETH","POWRBTC","POWRETH","ARKBTC","ARKETH","YOYOETH","XRPBTC","XRPETH","MODBTC","MODETH","ENJBTC","ENJETH","STORJBTC","STORJETH","BNBUSDT","VENBNB","YOYOBNB","POWRBNB","VENBTC","VENETH","KMDBTC","KMDETH","NULSBNB","RCNBTC","RCNETH","RCNBNB","NULSBTC","NULSETH","RDNBTC","RDNETH","RDNBNB","XMRBTC","XMRETH","DLTBNB","WTCBNB","DLTBTC","DLTETH","AMBBTC","AMBETH","AMBBNB","BCCETH","BCCUSDT","BCCBNB","BATBTC","BATETH","BATBNB","BCPTBTC","BCPTETH","BCPTBNB","ARNBTC","ARNETH","GVTBTC","GVTETH","CDTBTC","CDTETH","GXSBTC","GXSETH","NEOUSDT","NEOBNB","POEBTC","POEETH","QSPBTC","QSPETH","QSPBNB","BTSBTC","BTSETH","BTSBNB","XZCBTC","XZCETH","XZCBNB","LSKBTC","LSKETH","LSKBNB","TNTBTC","TNTETH","FUELBTC","FUELETH","MANABTC","MANAETH","BCDBTC","BCDETH","DGDBTC","DGDETH","IOTABNB","ADXBTC","ADXETH","ADXBNB","ADABTC","ADAETH","PPTBTC","PPTETH","CMTBTC","CMTETH","CMTBNB","XLMBTC","XLMETH","XLMBNB","CNDBTC","CNDETH","CNDBNB","LENDBTC","LENDETH","WABIBTC","WABIETH","WABIBNB","LTCETH","LTCUSDT","LTCBNB","TNBBTC","TNBETH","WAVESBTC","WAVESETH","WAVESBNB","GTOBTC","GTOETH","GTOBNB","ICXBTC","ICXETH","ICXBNB","OSTBTC","OSTETH","OSTBNB","ELFBTC","ELFETH","AIONBTC","AIONETH","AIONBNB","NEBLBTC","NEBLETH","NEBLBNB","BRDBTC","BRDETH","BRDBNB","MCOBNB","EDOBTC","EDOETH","WINGSBTC","WINGSETH","NAVBTC","NAVETH","NAVBNB","LUNBTC","LUNETH","TRIGBTC","TRIGETH","TRIGBNB","APPCBTC","APPCETH","APPCBNB","VIBEBTC","VIBEETH","RLCBTC","RLCETH","RLCBNB","INSBTC","INSETH","PIVXBTC","PIVXETH","PIVXBNB","IOSTBTC","IOSTETH","CHATBTC","CHATETH","STEEMBTC","STEEMETH","STEEMBNB","NANOBTC","NANOETH","NANOBNB","VIABTC","VIAETH","VIABNB","BLZBTC","BLZETH","BLZBNB","AEBTC","AEETH","AEBNB","RPXBTC","RPXETH","RPXBNB","NCASHBTC","NCASHETH","NCASHBNB","POABTC","POAETH","POABNB"];
var lambda = new AWS.Lambda({
  region: 'ap-northeast-2'
});

exports.handler = (event, context, callback) => {
    for (let i = 0; i < symbols.length; i++){

        let attr = {
            base: baseList[i],
            coin: coins[i],
            symbol: symbols[i]
        };
        console.log(attr)

        lambda.invoke({
            FunctionName: 'binance-collector',
            Payload: JSON.stringify(attr, null, 0) // pass params
        }, function(err, data){
            if(err) console.log("err: ", attr.base, attr.coin, err, data);
        });

        //FOR TEST
//         var index = require("./binance-index.js");
//         index.handler(attr, context);
    }
}
